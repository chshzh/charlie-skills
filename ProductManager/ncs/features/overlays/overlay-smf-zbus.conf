# Architecture: SMF + zbus Modular Pattern
# State Machine Framework with message-based communication

# State Machine Framework
CONFIG_SMF=y
CONFIG_SMF_ANCESTOR_SUPPORT=y
CONFIG_SMF_INITIAL_TRANSITION=y

# zbus Message Bus
CONFIG_ZBUS=y
CONFIG_ZBUS_MSG_SUBSCRIBER=y
CONFIG_ZBUS_MSG_SUBSCRIBER_NET_BUF_POOL_SIZE=64
CONFIG_ZBUS_CHANNEL_NAME=y

# Runtime statistics (helpful for debugging)
CONFIG_ZBUS_RUNTIME_OBSERVERS=y

# Logging for zbus (disable in production)
CONFIG_ZBUS_LOG_LEVEL_DBG=y

# Thread support (modules run in their own threads)
CONFIG_MULTITHREADING=y
CONFIG_NUM_PREEMPT_PRIORITIES=15
CONFIG_THREAD_STACK_INFO=y
CONFIG_THREAD_NAME=y

# Task Watchdog (recommended for production)
CONFIG_TASK_WDT=y
CONFIG_TASK_WDT_CHANNELS=8
CONFIG_TASK_WDT_MIN_TIMEOUT=10000

# Work queue for module initialization
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048

# Logging (deferred mode recommended with zbus)
CONFIG_LOG=y
CONFIG_LOG_MODE_DEFERRED=y
CONFIG_LOG_BUFFER_SIZE=4096

# Heap (SMF+zbus needs more heap than simple threading)
CONFIG_HEAP_MEM_POOL_SIZE=16384
